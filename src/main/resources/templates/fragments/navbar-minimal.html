<!DOCTYPE html>
<html lang="it" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <!-- Questo head non verrÃ  utilizzato, serve solo per la validazione -->
</head>
<body>
    <!-- Minimal Navbar Fragment -->
    <nav class="navbar" th:fragment="navbar">
        <div class="navbar-container">
            <a th:href="@{/}" class="navbar-brand">
                <i class="fas fa-book"></i>
                SiwBooks
            </a>
            
            <button class="mobile-toggle">
                <i class="fas fa-bars"></i>
            </button>
            
            <ul class="navbar-menu">
                <li>
                    <a th:href="@{/products}" class="nav-link">
                        <i class="fas fa-book"></i>
                        Libri
                    </a>
                </li>
                <li>
                    <a th:href="@{/authors}" class="nav-link">
                        <i class="fas fa-user-pen"></i>
                        Autori
                    </a>
                </li>
                <li th:if="${isAdmin}">
                    <a th:href="@{/product/create}" class="nav-link">
                        <i class="fas fa-plus"></i>
                        Aggiungi Libro
                    </a>
                </li>
                <li th:if="${isAuthenticated}">
                    <a th:href="@{/user/products}" class="nav-link">
                        <i class="fas fa-user-circle"></i>
                        I Miei Libri
                    </a>
                </li>
            </ul>
            
            <div class="auth-buttons">
                <div th:if="${isAuthenticated}" class="user-dropdown">
                    <a href="#" class="user-btn">
                        <div class="user-avatar" th:text="${#strings.substring(username, 0, 1).toUpperCase()}">U</div>
                        <span th:text="${username}">User</span>
                        <i class="fas fa-chevron-down"></i>
                    </a>
                    <div class="dropdown-menu">
                        <a th:href="@{/users/profile}">
                            <i class="fas fa-user"></i>
                            Il mio profilo
                        </a>
                        <div th:if="${isAdmin}" class="separator"></div>
                        <a th:if="${isAdmin}" th:href="@{/admin}">
                            <i class="fas fa-cog"></i>
                            Pannello Admin
                        </a>
                        <div class="separator"></div>
                        <a th:href="@{/logout}">
                            <i class="fas fa-sign-out-alt"></i>
                            Esci
                        </a>
                    </div>
                </div>
                
                <div th:unless="${isAuthenticated}">
                    <a th:href="@{/users/login}" class="btn btn-outline">
                        <i class="fas fa-sign-in-alt"></i>
                        Accedi
                    </a>
                    <a th:href="@{/users/register}" class="btn btn-primary">
                        <i class="fas fa-user-plus"></i>
                        Registrati
                    </a>
                </div>
            </div>
        </div>
    </nav>
</body>
</html>
